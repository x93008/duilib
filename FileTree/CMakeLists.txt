#CMake file for FileTree Demo
#Author: Generated by AI
#Date: 2025/09/30

set(source_files 
    FileTree.cpp 
    MainDialog.cpp 
    stdafx.cpp
)

include_directories(${CMAKE_CURRENT_SOURCE_DIR})

set(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)
add_executable(FileTreeDemo ${source_files} FileTree.rc)
add_dependencies(FileTreeDemo duilib)
target_link_libraries(FileTreeDemo duilib)
set_target_properties(FileTreeDemo PROPERTIES LINK_FLAGS "/SUBSYSTEM:WINDOWS")

# Set UTF-8 encoding and runtime library
if(WIN32 AND MSVC)
    target_compile_options(FileTreeDemo PRIVATE /utf-8)
    target_compile_options(FileTreeDemo PRIVATE /MT$<$<CONFIG:Debug>:d>)
endif()

# Install assets directly to bin directory
install(DIRECTORY ${CMAKE_SOURCE_DIR}/assets/Icon/
  DESTINATION bin/assets/Icon
  FILES_MATCHING PATTERN "*.png"
)
install(FILES 
  ${CMAKE_SOURCE_DIR}/assets/bg.bmp
  ${CMAKE_SOURCE_DIR}/assets/fg.bmp 
  ${CMAKE_SOURCE_DIR}/assets/winbk.bmp
  ${CMAKE_SOURCE_DIR}/assets/scrollbar.bmp
  ${CMAKE_SOURCE_DIR}/assets/thumb.bmp
  DESTINATION bin/assets
)
# Install FileTree's skin.xml
install(FILES ${CMAKE_CURRENT_SOURCE_DIR}/skin.xml
  DESTINATION bin/assets
)

install(
  TARGETS FileTreeDemo
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib
)
